<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.huateng.xhcp.mapper.system.CityMapper">
    <!-- 查询国家城市信息信息 -->
	<select id="queryCity" resultType="City" parameterType="City">
		SELECT city_code,province_code,city_name,city_zone
		FROM tbl_city_info
		<where>
			<if test="city_code != null and city_code != ''">AND city_code = #{city_code,jdbcType=VARCHAR}</if>
			<if test="province_code != null and province_code != ''">AND province_code = #{province_code,jdbcType=VARCHAR}</if>
			<if test="city_name != null and city_name != ''">AND city_name = #{city_name,jdbcType=VARCHAR}</if>
			<if test="city_zone != null and city_zone != ''">AND city_zone = #{city_zone,jdbcType=VARCHAR}</if>
			
		</where>
		<if test="b_order_name != null  and b_order_name != ''"><![CDATA[order by ${b_order_name} ${b_order_asc}  ]]></if>
	</select>
	
	<!-- 新增国家城市信息 -->
	<insert id="addCity" parameterType="City">
		INSERT INTO tbl_city_info (city_code,province_code,city_name,city_zone)
		VALUES (#{city_code,jdbcType=VARCHAR},#{province_code,jdbcType=VARCHAR},#{city_name,jdbcType=VARCHAR},#{city_zone,jdbcType=VARCHAR})
	</insert>
	
	<!-- 批量新增国家城市信息信息 -->
	<insert id="addBatchCity" parameterType="City">
		INSERT INTO tbl_city_info (city_code,province_code,city_name,city_zone)
		<foreach item="item" collection="list" separator="union all">
			SELECT #{item.city_code,jdbcType=VARCHAR},#{item.province_code,jdbcType=VARCHAR},#{item.city_name,jdbcType=VARCHAR},#{item.city_zone,jdbcType=VARCHAR}
			FROM dual
		</foreach>
	</insert>
	
	<!-- 更新国家城市信息信息 -->
	<update id="updateCity" parameterType="City">
		UPDATE tbl_city_info
		<set>
	      	<if test="city_code != null">city_code = #{city_code,jdbcType=VARCHAR},</if>
	      	<if test="province_code != null">province_code = #{province_code,jdbcType=VARCHAR},</if>
	      	<if test="city_name != null">city_name = #{city_name,jdbcType=VARCHAR},</if>
	      	<if test="city_zone != null">city_zone = #{city_zone,jdbcType=VARCHAR},</if>
	      	
		</set>
		WHERE city_code = #{city_code,jdbcType=VARCHAR}
	</update>
	
	<!-- 删除国家城市信息信息 -->
	<delete id="deleteCity" parameterType="City">
		DELETE FROM tbl_city_info WHERE city_code = #{city_code,jdbcType=VARCHAR}
	</delete>
	
	<!-- 批量删除国家城市信息信息-->
	<delete id="deleteBatchCity" parameterType="City">
		DELETE FROM tbl_city_info WHERE city_code IN
		<foreach collection="list" item="item" index="index" open="(" close=")" separator=",">
			#{item.city_code,jdbcType=VARCHAR}
		</foreach>
	</delete>
</mapper>
