<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.huateng.xhcp.mapper.system.CityTownMapper">
    <!-- 查询城市城区信息信息 -->
	<select id="queryCityTown" resultType="CityTown" parameterType="CityTown">
		SELECT town_code,city_code,town_name,post_code
		FROM tbl_city_town_info
		<where>
			<if test="town_code != null and town_code != ''">AND town_code = #{town_code,jdbcType=VARCHAR}</if>
			<if test="city_code != null and city_code != ''">AND city_code = #{city_code,jdbcType=VARCHAR}</if>
			<if test="town_name != null and town_name != ''">AND town_name = #{town_name,jdbcType=VARCHAR}</if>
			<if test="post_code != null and post_code != ''">AND post_code = #{post_code,jdbcType=VARCHAR}</if>
			
		</where>
		<if test="b_order_name != null  and b_order_name != ''"><![CDATA[order by ${b_order_name} ${b_order_asc}  ]]></if>
	</select>
	
	<!-- 新增城市城区信息 -->
	<insert id="addCityTown" parameterType="CityTown">
		INSERT INTO tbl_city_town_info (town_code,city_code,town_name,post_code)
		VALUES (#{town_code,jdbcType=VARCHAR},#{city_code,jdbcType=VARCHAR},#{town_name,jdbcType=VARCHAR},#{post_code,jdbcType=VARCHAR})
	</insert>
	
	<!-- 批量新增城市城区信息信息 -->
	<insert id="addBatchCityTown" parameterType="CityTown">
		INSERT INTO tbl_city_town_info (town_code,city_code,town_name,post_code)
		<foreach item="item" collection="list" separator="union all">
			SELECT #{item.town_code,jdbcType=VARCHAR},#{item.city_code,jdbcType=VARCHAR},#{item.town_name,jdbcType=VARCHAR},#{item.post_code,jdbcType=VARCHAR}
			FROM dual
		</foreach>
	</insert>
	
	<!-- 更新城市城区信息信息 -->
	<update id="updateCityTown" parameterType="CityTown">
		UPDATE tbl_city_town_info
		<set>
	      	<if test="town_code != null">town_code = #{town_code,jdbcType=VARCHAR},</if>
	      	<if test="city_code != null">city_code = #{city_code,jdbcType=VARCHAR},</if>
	      	<if test="town_name != null">town_name = #{town_name,jdbcType=VARCHAR},</if>
	      	<if test="post_code != null">post_code = #{post_code,jdbcType=VARCHAR},</if>
	      	
		</set>
		WHERE town_code = #{town_code,jdbcType=VARCHAR}
	</update>
	
	<!-- 删除城市城区信息信息 -->
	<delete id="deleteCityTown" parameterType="CityTown">
		DELETE FROM tbl_city_town_info WHERE town_code = #{town_code,jdbcType=VARCHAR}
	</delete>
	
	<!-- 批量删除城市城区信息信息-->
	<delete id="deleteBatchCityTown" parameterType="CityTown">
		DELETE FROM tbl_city_town_info WHERE town_code IN
		<foreach collection="list" item="item" index="index" open="(" close=")" separator=",">
			#{item.town_code,jdbcType=VARCHAR}
		</foreach>
	</delete>
</mapper>
